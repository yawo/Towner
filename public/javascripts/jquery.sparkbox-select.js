(function($){var selectboxCounter=0;$.fn.sbCustomSelect=function(options){var iOS=(navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||(navigator.userAgent.match(/iPad/i)),android=(navigator.userAgent.match(/Android/i)),UP=38,DOWN=40,SPACE=32,RETURN=13,TAB=9,matchString='',settings=$.extend({appendTo:false},options);var updateSelect=function(){var $this=$(this),$dropdown=$('.sb-dropdown[data-id='+$this.parent().data('id')+']'),$sbSelect=$this.siblings('.sb-select');if(this.selectedIndex!=-1){$sbSelect.val(this[this.selectedIndex].innerHTML);$dropdown.children().removeClass('selected').filter(':contains('+this[this.selectedIndex].innerHTML+')').addClass('selected');}};var dropdownSelection=function(e){var $target=$(e.target),id=$target.closest('ul').attr('data-id'),$option=$('.sb-custom[data-id='+id+']').find('option').filter('[value="'+$target.parent().data('value')+'"]');e.preventDefault();$option[0].selected=true;$target.closest('ul').fadeOut('fast');$option.parent().trigger('change');};var createDropdown=function($select,i){var $options=$select.children(),$dropdown=$('<ul data-id="'+i+'" class="sb-dropdown"/>');$options.each(function(){$this=$(this);$dropdown.append('<li data-value="'+$this.val()+'"><a href=".">'+$this.text()+'</a></li>');});$dropdown.bind('click',dropdownSelection);return $dropdown;};var viewList=function(e){var $this=$(this),id=$this.data('id');clearKeyStrokes();$('.sb-dropdown').filter('[data-id!='+id+']').fadeOut('fast');$('.sb-dropdown').filter('[data-id='+id+']').fadeIn('fast');e.preventDefault();};var hideDropdown=function(e){if(!$(e.target).closest('.sb-custom').length){$('.sb-dropdown').fadeOut('fast');}};var selectKeypress=function(e){var $this=$(this),$current=$('.sb-dropdown[data-id='+$this.data('id')+']').find('.selected');if((e.keyCode==UP||e.keyCode==DOWN||e.keyCode==SPACE)&&$current.is(':hidden')){$current.focus();return;}
if(e.keyCode==UP&&$current.prev().length){e.preventDefault();$current.removeClass('selected');$current.prev().addClass('selected');}else if(e.keyCode==DOWN&&$current.next().length){e.preventDefault();$current.removeClass('selected');$current.next().addClass('selected');}
if(e.keyCode==RETURN||e.keyCode==SPACE){$current.trigger('click');return;}
if(e.keyCode>=48&&e.keyCode<=90){matchString+=String.fromCharCode(e.keyCode);checkforMatch(e);}
if(e.keyCode==TAB&&$current.is(':visible')){e.preventDefault();$current.trigger('click');hideDropdown(e);}};var checkforMatch=function(e){var re='/'+matchString+'.*/';$(e.target).siblings('ul').find('a').each(function(){if(this.innerHTML.toUpperCase().indexOf(matchString)===0){$(this).trigger('click');return;}});};var clearKeyStrokes=function(){matchString='';};this.each(function(){var $self=$(this);$self.attr('tabindex',-1).wrap('<div data-id="'+selectboxCounter+'" class="sb-custom"/>').after('<input data-id="'+selectboxCounter+'" type="text" class="sb-select" readonly="readonly" />').bind('change',updateSelect);if(iOS||android){$self.show().css({'display':'block','height':$self.next().innerHeight(),'opacity':0,'position':'absolute','width':'100%','z-index':1000});}else{$self.next().bind('click',viewList);if(!settings.appendTo){$self.after(createDropdown($self,selectboxCounter));}else{var offset=$self.parent().offset();$(settings.appendTo).append(createDropdown($self,selectboxCounter).css({'top':offset.top,'left':offset.left,'width':$self.parent().width()*0.8}));}}
$self.trigger('change');selectboxCounter++;});$(document).bind('click',hideDropdown);$('.sb-custom').find('.sb-select').live('keydown',selectKeypress);$('.sb-custom').bind('blur',clearKeyStrokes);$(document).delegate('.sb-dropdown','focus',viewList);return this;};})(jQuery);var is={ie:navigator.appName=='Microsoft Internet Explorer',java:navigator.javaEnabled(),ns:navigator.appName=='Netscape',ua:navigator.userAgent.toLowerCase(),version:parseFloat(navigator.appVersion.substr(21))||parseFloat(navigator.appVersion),win:navigator.platform=='Win32'}
is.mac=is.ua.indexOf('mac')>=0;if(is.ua.indexOf('opera')>=0){is.ie=is.ns=false;is.opera=true;}
if(is.ua.indexOf('gecko')>=0){is.ie=is.ns=false;is.gecko=true;}